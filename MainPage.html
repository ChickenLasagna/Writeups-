<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WriteUpz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        :root {
            --bg: #ffffff;
            --fg: #000000;
            --bg-2: #f8f9fa;
        }
        body { background-color: var(--bg); color: var(--fg); transition: background-color 0.3s, color 0.3s; }
        body.dark-mode { --bg: #121212; --fg: #ffffff; --bg-2: #1e1e1e; }

        /* Table styling for dark mode */
        body.dark-mode .writeup-table,
        body.dark-mode .writeup-table th,
        body.dark-mode .writeup-table td { background-color: #2c2c2c; color: #ffffff; }
        body.dark-mode .writeup-table th { background-color: #333; }
        body.dark-mode .writeup-table td { background-color: #444; }
        body.dark-mode .writeup-table tbody tr:hover { background-color: #555; }

        .filter-section { margin-bottom: 12px; }
        .writeup-table th, .writeup-table td { text-align: center; vertical-align: middle; }
        .writeup-table tbody tr:hover { background-color: #f1f1f1; }
        .writeup-table .btn-view { width: 100%; }
        .writeup-link { text-decoration: none; color: inherit; }
        .resources { margin-top: 10px; }
        .alert-info { margin-top: 16px; }

        /* Dark mode specific buttons/links */
        body.dark-mode .btn-view { background-color: #444; color: #fff; }
        body.dark-mode .btn-view:hover { background-color: #555; }
        body.dark-mode .writeup-link { color: #fff; }
        body.dark-mode .writeup-link:hover { color: #b0b0b0; }

        /* Controls */
        .controls { position: sticky; top: 0; z-index: 1030; background: var(--bg); padding: 8px 0; }

        /* Dark Mode Button - Top Right */
        .dark-mode-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #333;
            color: #fff;
            border: none;
            padding: 10px 14px;
            border-radius: 999px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,.2);
            z-index: 1040;
        }
        .dark-mode-btn:hover { background-color: #444; }

        /* Filters wrap nicely on mobile */
        .filters-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px; }
        @media (min-width: 576px) { .filters-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
        @media (min-width: 768px) { .filters-grid { grid-template-columns: repeat(6, minmax(0, 1fr)); } }

        /* Cut visual clutter on very small screens */
        @media (max-width: 575.98px) { .table thead th.small-hide, .table tbody td.small-hide { display: none; } }
        @media (max-width: 767.98px) { .table thead th.medium-hide, .table tbody td.medium-hide { display: none; } }
    </style>
</head>

<body>
    <!-- Coming Soon Banner -->
    <div class="alert alert-info rounded-3 m-0" role="alert">
        New writeups are coming soon! Stay tuned.
    </div>

    <button class="dark-mode-btn" onclick="toggleDarkMode()" aria-label="Toggle Dark Mode">üåô / ‚òÄÔ∏è</button>

    <div class="container mt-4">
        <div class="controls">
            <h2 class="h4 mb-3">Hacking Challenges - Writeups</h2>
            <!-- About Section -->
            <div class="alert alert-info py-2 mb-3" role="alert">
                <strong>ChickenLasagna's Blog:</strong> Writeup repository featuring hacking challenges, labs, and CTF Challenges.
            </div>
            <!-- Search Bar -->
            <div class="mb-2">
                <input type="text" id="searchInput" class="form-control" placeholder="Search writeups..." oninput="filterWriteups()" aria-label="Search writeups" />
            </div>
            <!-- Filters Section -->
            <div class="filter-section">
                <div class="filters-grid">
                    <select id="platformFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by platform">
                        <option value="">Platform</option>
                    </select>
                    <select id="categoryFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by category">
                        <option value="">Category</option>
                    </select>
                    <select id="difficultyFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by difficulty">
                        <option value="">Difficulty</option>
                    </select>
                    <select id="languageFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by language">
                        <option value="">Language</option>
                    </select>
                    <select id="osFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by OS">
                        <option value="">OS</option>
                    </select>
                    <select id="statusFilter" class="form-select" onchange="filterWriteups()" aria-label="Filter by status">
                        <option value="">Status</option>
                    </select>
                </div>
            </div>

            <!-- Sort Controls -->
            <div class="mb-3 d-grid d-sm-flex align-items-center gap-2">
                <label for="sortSelect" class="form-label m-0">Sort by:</label>
                <select id="sortSelect" class="form-select" style="max-width: 260px;" onchange="sortWriteups()" aria-label="Sort writeups">
                    <option value="none">‚Äî None ‚Äî</option>
                    <option value="date-desc">Latest ‚Üí Oldest</option>
                    <option value="date-asc">Oldest ‚Üí Latest</option>
                    <option value="difficulty-asc">Difficulty: Lowest ‚Üí Highest</option>
                    <option value="difficulty-desc">Difficulty: Highest ‚Üí Lowest</option>
                </select>
                <button class="btn btn-outline-secondary" onclick="resetSort()">Reset sort</button>
                <button class="btn btn-warning ms-auto" onclick="clearFilters()">Clear Filters</button>
            </div>
        </div>

        <!-- Writeup Table -->
        <div class="table-responsive">
            <table class="table table-bordered align-middle writeup-table">
                <thead class="table-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col" class="medium-hide">Platform</th>
                        <th scope="col" class="medium-hide">Category</th>
                        <th scope="col" class="medium-hide">Language</th>
                        <th scope="col" class="small-hide">OS</th>
                        <th scope="col" class="medium-hide">Difficulty</th>
                        <th scope="col">Status</th>
                        <th scope="col">Date Completed</th>
                        <th scope="col" class="small-hide">Tags</th>
                        <th scope="col" class="small-hide">Resources</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="writeupTableBody">
                    <!-- Row 1 -->
                    <tr data-platform="HTB" data-category="Web" data-difficulty="Very Easy" data-language="JSON" data-os="None" data-status="Completed" data-date-completed="2025-08-15">
                        <td>1</td>
                        <td><a href="https://1drv.ms/w/c/c742090768847ee2/EeH1Iq70bhJOjpuIGgEPaQoBTx9HH9mSx6iZcP3mVPLb1A?e=PJYE92" class="writeup-link">FlagCommand</a></td>
                        <td class="medium-hide">HTB</td>
                        <td class="medium-hide">Web</td>
                        <td class="medium-hide">JSON</td>
                        <td class="small-hide">None</td>
                        <td class="medium-hide">Very Easy</td>
                        <td><span class="badge bg-success">Completed</span></td>
                        <td><time datetime="2025-08-15">15 Aug 2025</time></td>
                        <td class="small-hide">JSON, Web</td>
                        <td class="small-hide">
                            <div class="resources">
                                <a href="https://portswigger.net/burp/documentation/desktop/getting-started/intercepting-http-traffic" target="_blank" rel="noopener">Intercepting Request Using Burp Suite</a>
                            </div>
                        </td>
                        <td>
                            <button class="btn btn-primary btn-sm btn-view" onclick="window.location.href='https://1drv.ms/w/c/c742090768847ee2/EeH1Iq70bhJOjpuIGgEPaQoBTx9HH9mSx6iZcP3mVPLb1A?e=PJYE92'">View</button>
                        </td>
                    </tr>
                    <!-- Row 2 -->
                    <tr data-platform="Test2" data-category="Test2" data-difficulty="Test2" data-language="Test2" data-os="Test2" data-status="Test2" data-date-completed="2025-07-28">
                        <td>2</td>
                        <td><a href="https://chickenlasagna.github.io/Writeups-/test.html" class="writeup-link">Writeup 2</a></td>
                        <td class="medium-hide">Test2</td>
                        <td class="medium-hide">Test2</td>
                        <td class="medium-hide">Test2</td>
                        <td class="small-hide">Test2</td>
                        <td class="medium-hide">Test2</td>
                        <td><span class="badge bg-secondary">Test2</span></td>
                        <td><time datetime="2025-07-28">28 Jul 2025</time></td>
                        <td class="small-hide">Test2, Test2</td>
                        <td class="small-hide">
                            <div class="resources">
                                <a href="https://owasp.org/Top10/" target="_blank" rel="noopener">Owasp Top 10</a><br />
                                <a href="https://www.cloudflare.com/en-gb/learning/security/what-is-remote-code-execution/" target="_blank" rel="noopener">What is RCE?</a>
                            </div>
                        </td>
                        <td>
                            <button class="btn btn-primary btn-sm btn-view" onclick="window.location.href='https://chickenlasagna.github.io/Writeups-/test.html'">View</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let filterData = { platform: {}, category: {}, difficulty: {}, language: {}, os: {}, status: {} };

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            try { localStorage.setItem('writeupz-dark', isDark ? '1' : '0'); } catch (_) {}
        }

        // Restore dark mode preference
        (function restoreDark() {
            try { if (localStorage.getItem('writeupz-dark') === '1') document.body.classList.add('dark-mode'); } catch (_) {}
        })();

        // Update filters with unique values dynamically
        function updateFilters() {
            const rows = document.querySelectorAll('#writeupTableBody tr');
            filterData = { platform: {}, category: {}, difficulty: {}, language: {}, os: {}, status: {} };
            rows.forEach(row => {
                const platform = row.getAttribute('data-platform');
                const category = row.getAttribute('data-category');
                const difficulty = row.getAttribute('data-difficulty');
                const language = row.getAttribute('data-language');
                const os = row.getAttribute('data-os');
                const status = row.getAttribute('data-status');
                filterData.platform[platform] = (filterData.platform[platform] || 0) + 1;
                filterData.category[category] = (filterData.category[category] || 0) + 1;
                filterData.difficulty[difficulty] = (filterData.difficulty[difficulty] || 0) + 1;
                filterData.language[language] = (filterData.language[language] || 0) + 1;
                filterData.os[os] = (filterData.os[os] || 0) + 1;
                filterData.status[status] = (filterData.status[status] || 0) + 1;
            });
            updateFilterOptions('platformFilter', filterData.platform);
            updateFilterOptions('categoryFilter', filterData.category);
            updateFilterOptions('difficultyFilter', filterData.difficulty);
            updateFilterOptions('languageFilter', filterData.language);
            updateFilterOptions('osFilter', filterData.os);
            updateFilterOptions('statusFilter', filterData.status);
        }

        function updateFilterOptions(filterId, items) {
            const filter = document.getElementById(filterId);
            const placeholder = filter.querySelector('option');
            const placeholderClone = placeholder.cloneNode(true);
            filter.innerHTML = '';
            filter.appendChild(placeholderClone);
            for (const [key, value] of Object.entries(items)) {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = `${key} (${value})`;
                filter.appendChild(option);
            }
        }

        function getDateValue(row) {
            const iso = row.getAttribute('data-date-completed');
            return iso ? new Date(iso).getTime() : 0;
        }
        const difficultyRank = { 'very easy': 1, 'easy': 2, 'medium': 3, 'hard': 4, 'insane': 5 };
        function getDifficultyValue(row) {
            const d = (row.getAttribute('data-difficulty') || '').toLowerCase();
            return difficultyRank[d] ?? 999; // unknown difficulties go to the end
        }

        function sortWriteups() {
            const criterion = document.getElementById('sortSelect').value;
            const tbody = document.getElementById('writeupTableBody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            if (criterion === 'none') return; // do nothing

            rows.sort((a, b) => {
                switch (criterion) {
                    case 'date-asc':
                        return getDateValue(a) - getDateValue(b);
                    case 'date-desc':
                        return getDateValue(b) - getDateValue(a);
                    case 'difficulty-asc':
                        return getDifficultyValue(a) - getDifficultyValue(b);
                    case 'difficulty-desc':
                        return getDifficultyValue(b) - getDifficultyValue(a);
                }
                return 0;
            });

            rows.forEach(r => tbody.appendChild(r));
            filterWriteups();
            try { localStorage.setItem('writeupz-sort', criterion); } catch (_) {}
        }

        function resetSort() {
            document.getElementById('sortSelect').value = 'none';
            try { localStorage.removeItem('writeupz-sort'); } catch (_) {}
            // Re-append rows by original index (using number column as a hint)
            const tbody = document.getElementById('writeupTableBody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            rows.sort((a,b) => parseInt(a.firstElementChild.textContent,10) - parseInt(b.firstElementChild.textContent,10));
            rows.forEach(r => tbody.appendChild(r));
            filterWriteups();
        }

        // Filter the table
        function filterWriteups() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const platformFilter = document.getElementById('platformFilter').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value.toLowerCase();
            const difficultyFilter = document.getElementById('difficultyFilter').value.toLowerCase();
            const languageFilter = document.getElementById('languageFilter').value.toLowerCase();
            const osFilter = document.getElementById('osFilter').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value.toLowerCase();

            const rows = document.querySelectorAll('#writeupTableBody tr');
            rows.forEach(row => {
                const name = row.querySelector('td:nth-child(2) a').textContent.toLowerCase();
                const platform = row.getAttribute('data-platform').toLowerCase();
                const category = row.getAttribute('data-category').toLowerCase();
                const difficulty = row.getAttribute('data-difficulty').toLowerCase();
                const language = row.getAttribute('data-language').toLowerCase();
                const os = row.getAttribute('data-os').toLowerCase();
                const status = row.getAttribute('data-status').toLowerCase();

                const matchesSearch = name.includes(searchInput);
                const matchesPlatform = platform.includes(platformFilter);
                const matchesCategory = category.includes(categoryFilter);
                const matchesDifficulty = difficulty.includes(difficultyFilter);
                const matchesLanguage = language.includes(languageFilter);
                const matchesOs = os.includes(osFilter);
                const matchesStatus = status.includes(statusFilter);

                row.style.display = (matchesSearch && matchesPlatform && matchesCategory && matchesDifficulty && matchesLanguage && matchesOs && matchesStatus) ? '' : 'none';
            });
        }

        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('platformFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('difficultyFilter').value = '';
            document.getElementById('languageFilter').value = '';
            document.getElementById('osFilter').value = '';
            document.getElementById('statusFilter').value = '';
            filterWriteups();
        }

        // Initialize on page load
        window.addEventListener('load', function () {
            updateFilters();
            filterWriteups();
            // Restore sort choice
            try {
                const savedSort = localStorage.getItem('writeupz-sort');
                if (savedSort) {
                    const sel = document.getElementById('sortSelect');
                    if (Array.from(sel.options).some(o => o.value === savedSort)) {
                        sel.value = savedSort;
                        sortWriteups();
                    }
                }
            } catch (_) {}
        });
    </script>
</body>
</html>
